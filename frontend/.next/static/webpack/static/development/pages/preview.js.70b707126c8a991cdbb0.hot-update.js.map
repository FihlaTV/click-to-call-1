{"version":3,"file":"static/webpack/static/development/pages/preview.js.70b707126c8a991cdbb0.hot-update.js","sources":["webpack:///./components/MatchedScripts.js"],"sourcesContent":["import React, { Component } from 'react';\nimport gql from \"graphql-tag\";\nimport { Query } from \"react-apollo\";\nimport { legislators } from \"../lib/legislators\";\nimport {houseMembers, senateMembers} from \"../lib/people\";\n\nconst SINGLE_SCRIPT_QUERY = gql`\n  query SINGLE_SCRIPT_QUERY($id: String!) {\n    campaignScripts(where: { campaignID: $id }) {\n      id\n      title\n      scriptContent\n      targetCondition2\n      targetCondition3\n      targetCondition4\n      data\n    }\n  }\n`;\n\n class MatchedScripts extends Component {\n\n    state = {\n        targetCandidates: this.props.candidates,\n    };\n\n    render() {\n\n    return (\n      <div>\n        <Query query={SINGLE_SCRIPT_QUERY} variables={{ id: this.props.id }} >\n            {({ data, loading, error }) => {\n                if (loading) return <p>Loading...</p>;\n                if (data.item) return <p>No Item Found for ID...</p>;\n                if (error) return <p>Error: {error.message}</p>;\n\n                let houseMemberArray = [];\n                let senateMemberArray = [];\n                let legislatorHouseArray = [];\n                let legislatorSenateArray = [];\n\n\n                  houseMembers.map(hm => {\n                    var dis = hm.district;\n                    var st = hm.state;\n                    houseMemberArray.push(hm.label+\", \"+st+\"-\"+dis);\n                  });\n\n                  senateMembers.map(se => {\n                    var st = se.state;\n                    senateMemberArray.push(se.label+\", \"+st);\n                  });\n\n                  legislators.map(leg => {\n                    var arr = leg.terms;\n\n                    var recentterm = arr[arr.length - 1];\n                    if(recentterm.district == undefined) {\n                      legislatorSenateArray.push(leg.name.first+\" \"+leg.name.last+\", \"+recentterm.state);\n                    } else {\n                      legislatorHouseArray.push(leg.name.first+\" \"+leg.name.last+\", \"+recentterm.state+\"-\"+recentterm.district);\n                    }\n\n                  });\n\n\n                  const statedis = this.props.candState+\"-\"+this.props.candDistrict;\n\n                  houseMemberArray.map(hma => {\n                    let name = hma.split(\", \");\n\n                    if(name[1] == statedis) {\n\n                        legislatorHouseArray.map(lha => {\n                          let legname = lha.split(\", \");\n                          if(legname[1] == name[1]) {\n\n                            return data.campaignScripts.map((cScript, i) => {\n                              // console.log(name[1]);\n                              if(cScript.data[0]) {\n                                var arraycontainskeyword = (cScript.data.indexOf(name[0]) > -1);\n                                console.log(cScript);\n                                console.log(name[0]);\n                                if(arraycontainskeyword == true) {\n                                  return (\n                                    <div className=\"repNameScript\" key={i}>\n                                      @@@@\n                                        <h1>{cScript.title}</h1>\n                                        {cScript.data}\n                                        <br />\n                                        {cScript.targetCondition2}\n                                        <br />\n                                        {cScript.targetCondition3}\n                                        <br />\n                                        {cScript.targetCondition4}\n                                        <div className=\"scriptContainer\">\n                                            <div dangerouslySetInnerHTML={{\n                                                __html: cScript.scriptContent\n                                            }}/>\n                                        </div>\n                                    </div>\n                                )\n                                } else {\n                                  return false;\n                                }\n                              } else {\n\n\n                                // do the other queries\n\n\n\n                              }\n                            });\n\n                          }\n                        });\n\n\n                    }\n                  })\n\n\n                    // Loops through all possible scripts\n                    return data.campaignScripts.map((cScript, i) => {\n                      // console.log(cScript.data)\n                      if(cScript.data[0]) {\n                        var arraycontainskeyword = (cScript.data.indexOf(this.props.matchedCand) > -1);\n                        // If target candidate matches address and ZIP, show this script\n                        if(arraycontainskeyword == true) {\n                          return (\n                            <div className=\"repNameScript\" key={i}>\n                                <h1>{cScript.title}</h1>\n                                {cScript.data}\n                                <br />\n                                {cScript.targetCondition2}\n                                <br />\n                                {cScript.targetCondition3}\n                                <br />\n                                {cScript.targetCondition4}\n                                <div className=\"scriptContainer\">\n                                    <div dangerouslySetInnerHTML={{\n                                        __html: cScript.scriptContent\n                                    }}/>\n                                </div>\n                            </div>\n                        )\n                        } else {\n                          return false;\n                        }\n                      } else if(cScript.targetCondition3) {\n                        if(this.props.candParty === \"Democratic Party\") {\n                          if(cScript.targetCondition3 == \"Democrat\") {\n                            return (\n                              <div className=\"repNameScript\" key={i}>\n\n                                  <h1>{cScript.title}</h1>\n                                  {cScript.data}\n                                  <br />\n                                  {cScript.targetCondition2}\n                                  <br />\n                                  {cScript.targetCondition3}\n                                  <br />\n                                  {cScript.targetCondition4}\n                                  <div className=\"scriptContainer\">\n                                      <div dangerouslySetInnerHTML={{\n                                          __html: cScript.scriptContent\n                                      }}/>\n                                  </div>\n                              </div>\n                          )\n                          }\n                        } else {\n                          if(cScript.targetCondition3 == \"Republican\") {\n                            return (\n                              <div className=\"repNameScript\" key={i}>\n\n                                  <h1>{cScript.title}</h1>\n                                  {cScript.data}\n                                  <br />\n                                  {cScript.targetCondition2}\n                                  <br />\n                                  {cScript.targetCondition3}\n                                  <br />\n                                  {cScript.targetCondition4}\n                                  <div className=\"scriptContainer\">\n                                      <div dangerouslySetInnerHTML={{\n                                          __html: cScript.scriptContent\n                                      }}/>\n                                  </div>\n                              </div>\n                          )\n                        }\n                      }\n                    } else if(cScript.targetCondition4) {\n                      if(this.props.candState) {\n                        if(this.props.candState == cScript.targetCondition4){\n                          return (\n                            <div className=\"repNameScript\" key={i}>\n                                <h1>{cScript.title}</h1>\n                                {cScript.data}\n                                <br />\n                                {cScript.targetCondition2}\n                                <br />\n                                {cScript.targetCondition3}\n                                <br />\n                                {cScript.targetCondition4}\n                                <div className=\"scriptContainer\">\n                                    <div dangerouslySetInnerHTML={{\n                                        __html: cScript.scriptContent\n                                    }}/>\n                                </div>\n                            </div>\n                        )\n                        } else {\n                          return false;\n                        }\n                      }\n                    } else {\n                      this.state.targetCandidates.map((cand, i) => {\n                        var scriptID = cand.id;\n                          // Loops through all legislators. Adds 10 to ranked score.\n                          legislators.map(q => {\n                            if(q.id.bioguide === scriptID && cand.answer === data.campaignScripts.targetCondition2) {\n                              var fullname = q.name.first+\" \"+q.name.last;\n                              if(cScript.data) {\n                                cScript.data.map(n => {\n                                  if(n == fullname) {\n                                    return (\n                                      <div className=\"repNameScript\" key={i}>\n                                        <h1>{cScript.title}</h1>\n                                        {cScript.data}\n                                        <br />\n                                        {cScript.targetCondition2}\n                                        <br />\n                                        {cScript.targetCondition3}\n                                        <br />\n                                        {cScript.targetCondition4}\n                                        <div className=\"scriptContainer\">\n                                          <div dangerouslySetInnerHTML={{\n                                            __html: cScript.scriptContent\n                                          }}/>\n                                        </div>\n                                      </div>\n                                    )\n                                  }\n                                });\n                              }\n                            }\n                          });\n                        });\n                      }\n\n\n                    });\n                  }\n                }\n        </Query>\n      </div>\n    );\n  }\n}\n\n\nexport default MatchedScripts;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAaA;;;;;;;;;;;;;;;;;;AAEA;AACA;AADA;AACA;;;;;;AAGA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AAOA;AACA;AAEA;AACA;AAGA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAKA;;;;AAhPA;AACA;AAmPA;;;;A","sourceRoot":""}