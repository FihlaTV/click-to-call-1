{"version":3,"file":"static/webpack/static/development/pages/updatescript.js.417ceca78e0aae86c91c.hot-update.js","sources":["webpack:///./components/UpdateScript.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport gql from \"graphql-tag\";\nimport Router from 'next/router';\nimport { Mutation, Query } from \"react-apollo\";\nimport Error from './ErrorMessage';\nimport DynamicSelect from \"./DynamicSelect\";\nimport {houseMembers, senateMembers} from \"../lib/people\";\n\n\n\n\nconst SINGLE_SCRIPT_QUERY = gql`\n  query SINGLE_SCRIPT_QUERY($id: ID!) {\n    campaignScript(where: { id: $id }) {\n      id\n      title\n      scriptContent\n      campaignID\n      data\n      targetCondition2\n      targetCondition3\n      targetCondition4\n    }\n  }\n`;\n\nconst UPDATE_SCRIPT_MUTATION = gql`\n  mutation UPDATE_SCRIPT_MUTATION(\n    $id: ID!\n    $title: String\n    $scriptContent: String\n    $campaignID: String\n    $data: Json\n    $targetCondition2: String\n    $targetCondition3: String\n    $targetCondition4: String\n  ) {\n    updateCampaignScript(\n      id: $id\n      title: $title\n      scriptContent: $scriptContent\n      campaignID: $campaignID\n      data: $data\n      targetCondition2: $targetCondition2\n      targetCondition3: $targetCondition3\n      targetCondition4: $targetCondition4\n    ) {\n      id\n      title\n      scriptContent\n      campaignID\n      data\n      targetCondition2\n      targetCondition3\n      targetCondition4\n\n    }\n  }\n`;\n\n\nclass UpdateScript extends Component {\n\n  state = {};\n\n  onDropdownChange = (currentNode, selectedNodes) => {\n    let targetCondish = [];\n    targetCondish.push(currentNode.label);\n    if (selectedNodes) {\n      selectedNodes.map(selectedItems => {\n        targetCondish.push(selectedItems.label);\n        // console.log(targetCondish);\n      });\n      targetCondish.shift();\n    }\n\n    this.setState({ data: targetCondish });\n    console.log(this.state);\n  };\n\n  handleChange = e => {\n    const { name, type, value } = e.target;\n    const val = type === \"number\" ? parseFloat(value) : value;\n    this.setState({ [name]: val });\n  };\n\n  handleSelectChange = e => {\n    const { name, value } = e.target;\n    this.setState({ [name]: value });\n    console.log( {[name] : value} );\n  };\n\n  componentDidMount() {\n    // SSR doesn't fire ComponentDidMount, so we import CKEditor inside of it and store it as a component prop\n    this.CKEditor = require(\"@ckeditor/ckeditor5-react\");\n    this.ClassicEditor = require(\"@ckeditor/ckeditor5-build-classic\");\n    this.setState({ isServer: false }); // We just do this to toggle a re-render\n  }\n\n  render() {\n    return (\n      <Query query={SINGLE_SCRIPT_QUERY} variables={{ id: this.props.id }}>\n        {({ data, loading, error }) => {\n          if (loading) return <p>Loading...</p>;\n          if (data.item) return <p>No Item Found for ID...</p>;\n          if (error) return <p>Error: {error.message}</p>;\n            console.log(data);\n          return (\n            <Mutation mutation={UPDATE_SCRIPT_MUTATION} variables={this.state}>\n              {(updateCampaignScript, { error, loading }) => (\n                  <div id=\"createCampaignScriptItem\">\n\n                    <Link href={\"/update?id=\"+this.props.id}>\n                    </Link>\n                  <Error error={error} />\n\n                  <h1>Update Script</h1>\n\n                  <form\n                    onSubmit={async e => {\n                      e.preventDefault();\n\n                      const res = await updateCampaignScript({\n                        variables: {\n                            id: this.props.id,\n                            ...this.state,\n                        }\n                    });\n\n                      Router.push({\n                          pathname: '/update',\n                          query: {id: data.campaignScript.campaignID},\n                      });\n                    }}\n                  >\n\n                    <h2>Update Script Version</h2>\n\n                    <input\n                      type=\"text\"\n                      id=\"newVersionName\"\n                      name=\"title\"\n                      required\n                      placeholder=\"Version Name\"\n                      defaultValue={data.campaignScript.title}\n                      onChange={this.handleChange}\n                    />\n\n                    <div className=\"setTargetingCondition\">\n                      <h3>Set Targeting Condition</h3>\n\n                      <DynamicSelect\n                        defaultValue={data.campaignScript.data}\n                        data={houseMembers}\n                        onChange={this.onDropdownChange} />\n\n                      <div className=\"addNewCondition\">\n                        <p>\n                          <i>\n                            <b>OR</b>\n                          </i>\n                        </p>\n                        <div className=\"newConditionRow\">\n                          <select\n                            name=\"targetCondition2\"\n                            onChange={this.handleSelectChange}\n                            defaultValue={data.campaignScript.targetCondition2}\n                            value={this.state.targetCondition2}\n                          >\n                            <option value=\"\">Support/Oppose</option>\n                            <option value=\"support\">Support</option>\n                            <option value=\"oppose\">Oppose</option>\n                            <option value=\"neither\">Neither</option>\n                          </select>\n                        </div>\n                      </div>\n\n                      <div className=\"addNewCondition\">\n                        <p>\n                          <i>AND</i>\n                        </p>\n                        <div className=\"newConditionRow\">\n                          <select\n                            name=\"targetCondition3\"\n                            onChange={this.handleSelectChange}\n                            defaultValue={data.campaignScript.targetCondition3}\n                            value={this.state.targetCondition3}\n                          >\n                            <option value=\"\">Party</option>\n                            <option value=\"Republican\">Republican</option>\n                            <option value=\"Democrat\">Democrat</option>\n                            <option value=\"Independent\">Independent</option>\n                          </select>\n                        </div>\n                      </div>\n\n                      <div className=\"addNewCondition\">\n                        <p>\n                          <i>AND</i>\n                        </p>\n                        <div className=\"newConditionRow\">\n                          <select\n                            name=\"targetCondition4\"\n                            onChange={this.handleSelectChange}\n                            defaultValue={data.campaignScript.targetCondition4}\n                            value={this.state.targetCondition4}\n                          >\n                            <option value=\"\">State</option>\n                            <option value=\"AL\">Alabama - AL</option>\n                            <option value=\"AK\">Alaska - AK</option>\n                            <option value=\"AZ\">Arizona - AZ</option>\n                            <option value=\"AR\">Arkansas - AR</option>\n                            <option value=\"CA\">California - CA</option>\n                            <option value=\"CO\">Colorado - CO</option>\n                            <option value=\"CT\">Connecticut - CT</option>\n                            <option value=\"DE\">Delaware - DE</option>\n                            <option value=\"FL\">Florida - FL</option>\n                            <option value=\"GA\">Georgia - GA</option>\n                            <option value=\"HI\">Hawaii - HI</option>\n                            <option value=\"ID\">Idaho - ID</option>\n                            <option value=\"IL\">Illinois - IL</option>\n                            <option value=\"IN\">Indiana - IN</option>\n                            <option value=\"IA\">Iowa - IA</option>\n                            <option value=\"KS\">Kansas - KS</option>\n                            <option value=\"KY\">Kentucky - KY</option>\n                            <option value=\"LA\">Louisiana - LA</option>\n                            <option value=\"ME\">Maine - ME</option>\n                            <option value=\"MD\">Maryland - MD</option>\n                            <option value=\"MA\">Massachusetts - MA</option>\n                            <option value=\"MI\">Michigan - MI</option>\n                            <option value=\"MN\">Minnesota - MN</option>\n                            <option value=\"MS\">Mississippi - MS</option>\n                            <option value=\"MO\">Missouri - MO</option>\n                            <option value=\"MT\">Montana - MT</option>\n                            <option value=\"NE\">Nebraska - NE</option>\n                            <option value=\"NV\">Nevada - NV</option>\n                            <option value=\"NH\">New Hampshire - NH</option>\n                            <option value=\"NJ\">New Jersey - NJ</option>\n                            <option value=\"NM\">New Mexico - NM</option>\n                            <option value=\"NY\">New York - NY</option>\n                            <option value=\"NC\">North Carolina - NC</option>\n                            <option value=\"OH\">Ohio - OH</option>\n                            <option value=\"OK\">Oklahoma - OK</option>\n                            <option value=\"OR\">Oregon - OR</option>\n                            <option value=\"PA\">Pennsylvania - PA</option>\n                            <option value=\"RI\">Rhode Island - RI</option>\n                            <option value=\"SC\">South Carolina - SC</option>\n                            <option value=\"SD\">South Dakota - SD</option>\n                            <option value=\"TN\">Tennessee - TN</option>\n                            <option value=\"TX\">Texas - TX</option>\n                            <option value=\"UT\">Utah - UT</option>\n                            <option value=\"VT\">Vermont - VT</option>\n                            <option value=\"VA\">Virginia - VA</option>\n                            <option value=\"WA\">Washington - WA</option>\n                            <option value=\"WV\">West Virginia - WV</option>\n                            <option value=\"WI\">Wisconsin - WI</option>\n                            <option value=\"WY\">Wyoming - WY</option>\n                          </select>\n                        </div>\n                      </div>\n\n                    </div>\n\n                    <h2>Script Content</h2>\n\n                    {this.CKEditor && (\n                      <this.CKEditor\n                        name=\"scriptContent\"\n                        data={data.campaignScript.scriptContent}\n                        editor={this.ClassicEditor}\n                        onInit={editor => {\n                          console.log(editor);\n                        }}\n                        onChange={(event, editor) => {\n                          const data = editor.getData();\n                          this.setState({ scriptContent: data });\n                        }}\n                      />\n                    )}\n\n                    <button type=\"submit\">Save</button>\n                  </form>\n                </div>\n              )}\n            </Mutation>\n          );\n        }}\n      </Query>\n    );\n  }\n}\n\nexport default UpdateScript;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AAeA;AACA;AAkCA;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAIA;AACA;AADA;AADA;AACA;AAJA;AAGA;AAOA;AACA;AACA;AAAA;AAAA;AAFA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA3KA;AAiLA;AAGA;;;;AApOA;AACA;AAsOA;;;;A","sourceRoot":""}